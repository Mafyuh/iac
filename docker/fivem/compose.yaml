
services:
  fivem:
    container_name: FiveM
    restart: on-failure
    environment:
        - LICENSE_KEY=$FIVEM_LICENSE_KEY
        - NO_DEFAULT_CONFIG=1
        - MYSQL_HOST=mysql
        - MYSQL_USER=fivem
        - MYSQL_PASSWORD=$MYSQL_PASSWORD
        - MYSQL_DATABASE=fivem_db
    ports:
        - 30120:30120
        - 30120:30120/udp
        - 40120:40120
    volumes:
        - ~/fivem:/config
        - ~/txData:/txData
    tty: true
    stdin_open: true
    image: spritsail/fivem@sha256:7f9de4d18e596f083453665e7988123fc0df287c2b2ed4f53fe588c1f163c1d2
    depends_on:
      - mysql

  
  mysql:
    image: mysql:8.4.5
    container_name: mysql
    restart: unless-stopped
    environment:
      MYSQL_ROOT_PASSWORD: $MYSQL_ROOT_PASSWORD
      MYSQL_DATABASE: fivem_db
      MYSQL_USER: fivem
      MYSQL_PASSWORD: $MYSQL_PASSWORD
    volumes:
      - mysql_data:/var/lib/mysql
    ports:
      - 3306:3306

volumes:
  mysql_data: